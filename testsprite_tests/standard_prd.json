{
  "meta": {
    "project": "Agent_BI",
    "date": "2025-09-13",
    "prepared_by": "ChatGPT"
  },
  "product_overview": "Agent_BI is a conversational Business Intelligence platform that empowers business users to access data insights through natural language queries in Portuguese, featuring dynamic visualizations and robust data integration for informed decision-making.",
  "core_goals": [
    "Enable business users to query and visualize data in natural language with high accuracy, specifically supporting Portuguese language.",
    "Reduce reliance on technical teams by providing self-service analytics and conversational interfaces.",
    "Provide interactive and real-time dashboards displaying key business KPIs with dynamic visualizations.",
    "Ensure secure access with strong authentication and role-based access control for sensitive business data.",
    "Maintain high system performance, availability, and scalability to handle growing user load and data volume."
  ],
  "key_features": [
    "Conversational interface built with Streamlit that supports natural language queries and displays text responses, figures, and charts.",
    "Integration with SQL Server for real-time business data querying and ETL pipelines for data management.",
    "Agent orchestration using LangGraph and LangChain to process and interpret complex queries.",
    "Interactive data visualizations generated with Plotly including filtering, sorting, and exploration features.",
    "User authentication and secure session management with role-based access control (RBAC).",
    "Administrator interfaces for monitoring pipeline health, managing metadata, users, and roles.",
    "Backend API implemented with FastAPI and Flask for query processing and task scheduling.",
    "Integration with OpenAI language models to understand and respond to natural language queries.",
    "Structured logging and monitoring system for error tracking and audit trails.",
    "Comprehensive unit and integration testing to ensure system reliability and accuracy."
  ],
  "user_flow_summary": [
    "User logs in through a secure authentication system that applies RBAC to control access.",
    "User submits a query in natural language Portuguese via the Streamlit chat interface.",
    "The query is processed by the LangGraph orchestration agent and OpenAI models to generate an accurate response.",
    "The system returns answers including textual information and dynamic visualizations such as charts and tables.",
    "Users interact with dashboards and visualizations, applying filters and exploring data interactively.",
    "Administrators access monitoring dashboards to track data pipeline status and manage metadata and user roles.",
    "All user interactions and system activities are logged for auditing, performance monitoring, and troubleshooting."
  ],
  "validation_criteria": [
    "Natural language query response accuracy is at least 95%.",
    "Dashboard and visualization load times remain under 5 seconds during normal use.",
    "System uptime meets or exceeds 99.9%.",
    "Role-based access control prevents unauthorized data access effectively.",
    "All sensitive data is encrypted both in transit and at rest following security policies.",
    "Logging captures all critical events and errors accurately and comprehensively.",
    "System performance scales appropriately to handle a 50% increase in users and 100% increase in data volume without degradation."
  ],
  "code_summary": {
    "tech_stack": [
      "Python",
      "FastAPI",
      "Streamlit",
      "Langchain",
      "SQL Server",
      "uvicorn",
      "pandas",
      "faiss"
    ],
    "features": [
      {
        "name": "handle_query",
        "description": "Endpoint principal que recebe a consulta do utilizador, invoca o grafo e retorna a resposta final.",
        "files": [
          "main.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Agent_BI - API Gateway",
            "version": "3.0.0"
          },
          "paths": {
            "/api/v1/query": {
              "post": {
                "summary": "Handle Query",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/QueryRequest"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Successful Response",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "components": {
            "schemas": {
              "QueryRequest": {
                "title": "QueryRequest",
                "required": [
                  "user_query",
                  "session_id"
                ],
                "type": "object",
                "properties": {
                  "user_query": {
                    "title": "User Query",
                    "type": "string"
                  },
                  "session_id": {
                    "title": "Session Id",
                    "type": "string",
                    "description": "ID de sess√£o para gerenciar o estado da conversa"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "status",
        "description": "Returns the status of the API.",
        "files": [
          "main.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Agent_BI - API Gateway",
            "version": "3.0.0"
          },
          "paths": {
            "/status": {
              "get": {
                "summary": "Status",
                "responses": {
                  "200": {
                    "description": "Successful Response",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
